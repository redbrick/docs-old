# Hey & Huh

## Getting Hey

All the source for hey is on in the c-hey account. Packages for i386 and amd64
are available from [redbrick-apt](/procedures/redbrick-apt)

## Getting huh

The source for huh is on [hg.redbrick](http://hg.redbrick.dcu.ie/huh/). Package
for amd64 is available from [redbrick-apt](/procedures/redbrick-apt)

## Making huh actually work

Historically huh operated by reading the local3.log, which was generated by a
patched version of write.

To avoid having to patch write anymore the new huh relies on hey sending
messages directly to syslog. As of jan 08 this patch has only been applied to
the amd64 version of hey. I have no plans to apply it on i386.

For this to work the following additions are necessary to the syslog-ng.conf:

``` c
destination df_huh { file("/var/log/huh.log" group("huh")); };

filter f_huh {
    program("hey");
};

log {
    source(s_all);
    filter(f_huh);
    destination(df_huh);
    #don't let this stuff get into any other logs.
    flags(final);
};
```

The order of the log statement is important, due to the flags(final) option.
This log statement should be placed before any others in `syslog-ng.conf`.

The group huh should be added to `/etc/group`. Syslog-ng will automatically
make the log readable by this group.

The huh binary should then be setgid huh so that it can read the file.

``` bash
$ ls -ld /usr/bin/huh
rwx--s--x 1 root huh 26K 2008-12-18 22:33 /usr/bin/huh
```
