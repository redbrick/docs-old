# News

When I re-installed the boards I had some nice document written on how to install it and stuff.
Something crashed though, and I never had time to rewrite it.

Boards runs on a piece of software called inn (InterNetNews) version 2.something. It's in repos as
3inn2. The google turned up [this document](http://www.eyrie.org/~eagle/faqs/inn.html) about it. You
shouldn't really need to touch it anyway.

## Reinstalling news

I don't remember exactly what was involved, but here's what I do remember:

* Install inn2 from repos (not inn, which gives you version 1, which is completly different)
* Copy `/etc/news/`, `/var/spool/news` & `/var/lib/news` (and possibly something else) to the new machine
* You have to rebuild the history or something before it'll work, there's a command that I can't remember.

## Mailing list boards

Stuff like this is generated by piping into a script from a mail alias

``` text
  # Mailing list to news aliases.
  #
  # $Id: lists_aliases,v 1.5 2003/11/13 11:05:47 tuama Exp $
  #

  redbrick-bugtraq: "|/srv/admin/scripts/m2n/mail2nntp.pl lists.bugtraq"
  redbrick-ilug: "|/srv/bin/m2n/mail2nntp.pl lists.ilug"
  gmail-invites: "|/srv/admin/scripts/m2n/mail2nntp.pl redbrick.gmail-invites"
  redbrick-debian-security: "|/srv/admin/scripts/m2n/mail2nntp.pl lists.debian-security"
  redbrick-apache: "|/srv/admin/scripts/m2n/mail2nntp.pl lists.apache"
  redbrick-exim: "|/srv/admin/scripts/m2n/mail2nntp.pl lists.exim"
```

Note: The stuff like announce or gamessoc mails going to boards is generated by mailman

## rss2news

Link looks after this.

## Checklist for INN2 reinstall

* Install INN2 from apt.
* Copy the following : `/etc/news`, `/var/spool/news`, `/var/lib/news` to the relevant parts of the
  new machine.
* Run `makehistory -0`
* cd to `/var/lib/news` and run `makedbz -s $(wc -l < history) -o`
* Reconfigure slrn to use this copy of Inn and check everything's there.
* Change the ip for news.

## Stopping annoying daily mail

``` bash
$ head /etc/cron.d/inn2
SHELL=/bin/sh
PATH=/usr/lib/news/bin:/sbin:/bin:/usr/sbin:/usr/bin

# Expire old news and overview entries nightly, generate reports.

15 4    * * *   news    test -x /usr/lib/news/bin/news.daily && news.daily expireover lowmark delayrm nomail > /dev/null
```

## Moving news

* Install inn2 (obviously enough)
* Follow the instructions here [here](http://www.eyrie.org/~eagle/faqs/inn.html#S6.4)
* Note that you do not *need* anything in `passwd.nntp`, as I was led to believe, we seemed to hit
  upon some sort of weird bug, as long as the old server is listed in `incoming.conf`.
